/*! jQuery ResponsiveIframe - v0.0.3 - 2013-09-26
* https://github.com/npr/responsiveiframe
* Copyright (c) 2013 Irakli Nadareishvili; Licensed MIT, GPL */
"undefined"!=typeof jQuery&&!function(a){"use strict";var b={xdomain:"*",ie:navigator.userAgent.toLowerCase().indexOf("msie")>-1,scrollToTop:!0},c={messageHandler:function(a,d){var e,f,g,h,i;if("*"!==b.xdomain){if(i=new RegExp(b.xdomain+"$"),"null"===d.origin)throw new Error("messageHandler( elem, e): There is no origin.  You are viewing the page from your file system.  Please run through a web server.");if(!d.origin.match(i))throw new Error("messageHandler( elem, e): The orgin doesn't match the responsiveiframe  xdomain.");g=!0}if(("*"===b.xdomain||g)&&(h=String(d.data.split("###")[1]),f=h.match(/^(\d+)(s?)$/),f&&3===f.length)){if(e=parseInt(f[1],10),!isNaN(e))try{c.setHeight(a,e)}catch(j){}b.scrollToTop&&"s"===f[2]&&scroll(0,0)}},setHeight:function(b,c){c+=130,a('iframe[name="'+b+'"]').css("height",c+"px")},getDocHeight:function(){var a=document;return Math.min(Math.max(a.body.scrollHeight,a.documentElement.scrollHeight),Math.max(a.body.offsetHeight,a.documentElement.offsetHeight),Math.max(a.body.clientHeight,a.documentElement.clientHeight))}},d={init:function(){return this.each(function(){var b=a(this);window.postMessage?window.addEventListener?window.addEventListener("message",function(a){var b=a.data.split("###")[0];c.messageHandler(b,a)},!1):window.attachEvent&&window.attachEvent("onmessage",function(a){var b=a.data.split("###")[0];c.messageHandler(b,a)},b):setInterval(function(){var d,e=a('iframe[name="'+b[0].name+'"]'),f=e[0].contentWindow.location.hash;f&&(d=f.match(/^#h(\d+)(s?)$/),d&&c.setHeight(b[0].src,d[1]))},150)})}};a.fn.responsiveIframe=function(c){return d[c]?d[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?(a.error("Method "+c+" does not exist on jQuery.responsiveIframe"),void 0):(a.extend(b,c),d.init.apply(this))}}(jQuery),function(){"use strict";function a(){return new d}var b,c,d=function(){b=this};d.prototype.allowResponsiveEmbedding=function(){window.addEventListener?(window.addEventListener("load",b.messageParent,!1),window.addEventListener("resize",b.messageParent,!1),b.messageParent()):window.attachEvent&&(window.attachEvent("onload",b.messageParent),window.attachEvent("onresize",b.messageParent),b.messageParent())},d.prototype.messageParent=function(a){var b,c=document.body.offsetHeight;c=a?c+"s":c,b=window.name+"###"+c,top.postMessage?top.postMessage(b,"*"):window.location.hash="h"+c},"undefined"!=typeof c&&"undefined"!=typeof c.exports?c.exports.responsiveIframe=a:window.responsiveIframe=a}();